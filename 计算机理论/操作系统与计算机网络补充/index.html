<!DOCTYPE html>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  
  <title itemprop="name">操作系统与计算机网络补充 | 宵晓咲</title>
  
    <link rel="shortcut icon" href="/images/img/apple-touch-icon-next.png">
  
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+SerifMerriweather|Merriweather+Sans|Source+Code+Pro|Ubuntu:400,700|Noto+Serif+SC" media="all">
  <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
  <link rel="stylesheet" id="saukra_css-css" href="/css/style.css" type="text/css" media="all">
  <link rel="stylesheet" href="/css/lib.min.css" media="all">
  <link rel="stylesheet" href="/css/font.css" media="all">
  <link rel="stylesheet" href="/css/insight.css" media="all">
  <link rel="stylesheet" href="/css/jquery.fancybox.min.css" media="all">
  <link rel="stylesheet" href="/css/zoom.css" media="all">
  <link rel="stylesheet" type="text/css" href="/css/sharejs.css">
<!--   <link rel="stylesheet" id="saukra_css-css" href="https://2heng.xin/wp-content/cache/autoptimize/css/autoptimize_ad42a61f4c7d4bdd9f91afcff6b5dda5.css
" type="text/css" media="all"> -->
  <script>
  /*Initial Variables*/
  var mashiro_option = new Object();
  var mashiro_global = new Object();
  mashiro_option.NProgressON = true;
  /* 
   * 邮箱信息之类的东西可以填在这里，这些js变量基本都作用于sakura-app.js
   * 这样的设置仅是为了方便在基于PHP开发的主题中设置js变量，既然移植到了Node上，我想或许可以精简这一逻辑吧
   */
  mashiro_option.email_domain = "";
  mashiro_option.email_name = "";
  mashiro_option.cookie_version_control = "";
  mashiro_option.qzone_autocomplete = false;
  mashiro_option.site_name = "宵晓咲";
  mashiro_option.author_name = "宵晓咲";
  mashiro_option.site_url = "https://aisaka.cloud";
  mashiro_option.v_appId = "d2ULHdiL7VOfJf17rpCD4DOX-gzGzoHsz";
  mashiro_option.v_appKey = "OLf7QaP1oTtqKhulLHuajYKu";
  mashiro_option.mathjax = "1";
  mashiro_option.qq_api_url = "https://api.mashiro.top/qqinfo/"; 
  mashiro_option.qq_avatar_api_url = "https://api.mashiro.top/qqinfo/";

  // mashiro_option.jsdelivr_css_src = "https://cdn.jsdelivr.net/gh/moezx/cdn@3.4.5/css/lib.min.css";
  // mashiro_option.float_player_on = true;

  /*End of Initial Variables*/
  </script>
  <script type="text/javascript">
  var bg = "https://cdn.jsdelivr.net/gh/aisakaki/aisakaki.github.io/images/new/83333853_p0.jpg".split(",");
  var bgindex = Math.floor(Math.random()*bg.length);
  if (!!window.ActiveXObject || "ActiveXObject" in window) { //is IE?
    alert('朋友，IE浏览器未适配哦~');
  }
  </script>
  <style type="text/css">
  .hljs-ln{border-collapse:collapse}.hljs-ln td{padding:0}.hljs-ln-n:before{content:attr(data-line-number)}
  </style>
  <style type="text/css">.site-top .lower nav{display:block !important;}.author-profile i,.post-like a,.post-share .show-share,.sub-text,.we-info a,span.sitename,.post-more i:hover,#pagination a:hover,.post-content a:hover,.float-content i:hover{color:#FE9600}.feature i,.download,.navigator i:hover,.links ul li:before,.ar-time i,span.ar-circle,.object,.comment .comment-reply-link,.siren-checkbox-radio:checked + .siren-checkbox-radioInput:after{background:#FE9600}::-webkit-scrollbar-thumb{background:#FE9600}.download,.navigator i:hover,.link-title,.links ul li:hover,#pagination a:hover,.comment-respond input[type='submit']:hover{border-color:#FE9600}.entry-content a:hover,.site-info a:hover,.comment h4 a,#comments-navi a.prev,#comments-navi a.next,.comment h4 a:hover,.site-top ul li a:hover,.entry-title a:hover,#archives-temp h3,span.page-numbers.current,.sorry li a:hover,.site-title a:hover,i.iconfont.js-toggle-search.iconsearch:hover,.comment-respond input[type='submit']:hover{color:#FE9600}.comments .comments-main{display:block !important;}.comments .comments-hidden{display:none !important;}background-position:center center;background-attachment:inherit;}
  </style>
</head>
</html>
<body class="page-template page-template-user page-template-page-analytics page-template-userpage-analytics-php page page-id-1297 chinese-font serif isWebKit">
  <div class="scrollbar" id="bar">
  </div>
  <a href="#" class="cd-top faa-float animated"></a>
  <section id="main-container">
    <div class="headertop ">
  <div id="banner_wave_1"></div>
  <div id="banner_wave_2"></div>
  <figure id="centerbg" class="centerbg">
    <div class="focusinfo no-select">
      <div class="header-tou">
        <a href="https://aisaka.cloud">
          <img src="/images/img/000.jpg">
        </a>
      </div>
      <div class="header-info">
        <p>且听风吟</p>
        <div class="top-social_v2">
          <li id="bg-pre">
            <img class="flipx" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
          
            
              
                <li>
                  <a href="htt20081@126.com" target="_blank" class="social-github" title="email">
                    <img src="/images/icon/email.svg">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://music.163.com/#/user/home?id=28578795" target="_blank" class="social-github" title="wangyiyun">
                    <img src="/images/icon/wangyiyun.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://space.bilibili.com/741763" target="_blank" class="social-github" title="bilibili">
                    <img src="/images/icon/bilibili.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://steamcommunity.com/id/aisakaki/" target="_blank" class="social-github" title="steam">
                    <img src="/images/icon/steam.svg">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://bangumi.tv/user/aisakaki" target="_blank" class="social-github" title="bangumi">
                    <img src="/images/icon/bgm.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://my.playstation.com/profile/AISAKAKI" target="_blank" class="social-github" title="psn">
                    <img src="/images/icon/ps.png">
                  </a>
                </li>
              
            
          
          <li id="bg-next">
            <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
        </div>
      </div>
    </div>
  </figure>
  <div id="video-container" style="">
    <video style="object-fit: fill" id="bgvideo" class="video" video-name="" src="" width="auto" preload="auto">
    </video>
    <div id="video-btn" class="loadvideo videolive">
    </div>
    <div id="video-add">
    </div>
    <div class="video-stu">
    </div>
  </div>
  <div class="headertop-down faa-float animated" onclick="headertop_down()">
    <span>
      <i class="fa fa-chevron-down" aria-hidden="true">
      </i>
    </span>
  </div>
</div>
    <div id="page" class="site wrapper">
      <header class="site-header no-select gizle sabit" role="banner">
  <div class="site-top">
    <div class="site-branding">
      <span class="site-title">
        <span class="logolink moe-mashiro">
          <a href="/">
            <span class="sakurasono"></span>
            <span class="shironeko">宵晓咲</span>
          </a>
        </span>
      </span>
    </div>
    <div class="searchbox search-form-submit">
      <i class="iconfont js-toggle-search iconsearch icon-search">
      </i>
    </div>
    <div id="show-nav" class="showNav mobile-fit">
      <div class="line line1">
      </div>
      <div class="line line2">
      </div>
      <div class="line line3">
      </div>
    </div>
    <div class="lower-cantiner">
      <div class="lower">
        <nav class="mobile-fit-control hide">
          <ul id="menu-new" class="menu">
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  " aria-hidden="true"></i>
                    首页
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/archives">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
                    时间线
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="javascript:;">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
                    ACG
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/categories/Anime/">
                          <i class="fa " aria-hidden="true"></i>
                          动画
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/Game/">
                          <i class="fa " aria-hidden="true"></i>
                          游戏
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/Music/">
                          <i class="fa " aria-hidden="true"></i>
                          音乐
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/游戏设计/">
                          <i class="fa " aria-hidden="true"></i>
                          游戏设计
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="javascript:;">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-book faa-shake" aria-hidden="true"></i>
                    随想
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/categories/日记/">
                          <i class="fa " aria-hidden="true"></i>
                          日记
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/阅读/">
                          <i class="fa " aria-hidden="true"></i>
                          阅读
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/随笔/">
                          <i class="fa " aria-hidden="true"></i>
                          随笔
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="javascript:;">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-code faa-shake" aria-hidden="true"></i>
                    技术
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/categories/程序语言/">
                          <i class="fa " aria-hidden="true"></i>
                          程序
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/人工智能/">
                          <i class="fa " aria-hidden="true"></i>
                          人工智能
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/开发/">
                          <i class="fa " aria-hidden="true"></i>
                          开发
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/数据库与中间件/">
                          <i class="fa " aria-hidden="true"></i>
                          中间件
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/网络与云/">
                          <i class="fa " aria-hidden="true"></i>
                          网络
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/算法与数据结构/">
                          <i class="fa " aria-hidden="true"></i>
                          算法
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/计算机理论/">
                          <i class="fa " aria-hidden="true"></i>
                          CS
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/论文阅读笔记/">
                          <i class="fa " aria-hidden="true"></i>
                          论文
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="javascript:;">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-leaf faa-wrench" aria-hidden="true"></i>
                    其它
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/categories/硬件/">
                          <i class="fa " aria-hidden="true"></i>
                          硬件
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/博客/">
                          <i class="fa " aria-hidden="true"></i>
                          博客
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/工具/">
                          <i class="fa " aria-hidden="true"></i>
                          工具
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="javascript:;">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-list-ul faa-vertical" aria-hidden="true"></i>
                    清单
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/tags/悦读/">
                          <i class="fa fa-th-list faa-bounce" aria-hidden="true"></i>
                          书单
                        </a>
                      </li>
                    
                      <li>
                        <a href="/bangumi/">
                          <i class="fa fa-film faa-vertical" aria-hidden="true"></i>
                          番组
                        </a>
                      </li>
                    
                      <li>
                        <a href="/music/">
                          <i class="fa fa-headphones" aria-hidden="true"></i>
                          歌单
                        </a>
                      </li>
                    
                      <li>
                        <a href="/tags/图集/">
                          <i class="fa fa-photo" aria-hidden="true"></i>
                          图集
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="/comment/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-pencil-square-o faa-tada" aria-hidden="true"></i>
                    留言板
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/links/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-link faa-shake" aria-hidden="true"></i>
                    Link
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/about/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-meetup faa-shake" aria-hidden="true"></i>
                    我
                  </span>
                </a>
                
              </li>
            
          </ul>
        </nav>
      </div>
    </div>
  </div>
</header>

      <link rel="stylesheet" type="text/css" href="/css/sharejs.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">
<div class="pattern-center-blank"></div>

<div id="content" class="site-content">
  <div id="primary" class="content-area">
    <main id="main" class="site-main" role="main">
      <article id="post-1" class="post-1 post type-post status-publish format-standard has-post-thumbnail hentry category-uncategorized">
        <div class="toc"></div>
        <!--<div class="toc-entry-content"><!-- 套嵌目录使用（主要为了支援评论）-->
        
          <header class="entry-header">
            <h1 class="entry-title">操作系统与计算机网络补充</h1>
            <p class="entry-census">&nbsp;&nbsp;2020-5-29&nbsp;</p>

            <hr>
          </header>
        
        <div class="entry-content">
          <center>很久以前总结过一次，这里着重突出一些内容</center>

<a id="more"></a>
<h1 id="操作系统"><a href="#操作系统" class="headerlink" title="操作系统"></a>操作系统</h1><ol>
<li><p>死锁恢复</p>
<p>死锁四要素：互斥、占有和等待、不可抢占、环路等待</p>
</li>
</ol>
<p>死锁恢复办法：</p>
<ol>
<li><p>撤消进程，剥夺资源</p>
<ol>
<li>线程设置优先级，让一个（或几个）线程回退，剩下的线程就像没发生死锁一样继续保持着它们需要的锁</li>
<li>死锁发生的时候设置随机的优先级；如果赋予这些线程的优先级是固定不变的，同一批线程总是会拥有更高的优先级。</li>
</ol>
<p>也可以死锁避免（银行家算法），避免系统进入危险状态</p>
</li>
<li><p><strong>进程间通信</strong></p>
<p><strong>①管道</strong></p>
<p><strong>②消息队列</strong></p>
<p><strong>③共享储存</strong></p>
<p><strong>④信号量</strong></p>
<p><strong>⑤套接字</strong></p>
<p><strong>⑥信号</strong></p>
</li>
<li><p>JAVA线程间通信</p>
<p>①volatile</p>
<p>②Object的wait()和notify()</p>
<p>③JUC的CountDownLatch</p>
<p>④JUC的各种锁</p>
<p>⑤管道</p>
<p>⑥信号量</p>
</li>
<li><p>内存泄漏和内存溢出的区别</p>
<p>   <strong>内存溢出 out of memory</strong>，是指程序在<strong>申请内存时，没有足够的内存空间</strong>供其使用，出现 out of memory；</p>
<p>   <strong>内存泄露 memory leak</strong>，是指程序在<strong>申请内存后，无法释放已申请的内存空间</strong>，一次内存泄露危害可以忽略，但内存泄露堆积后果很严重，无论多少内存,迟早会被占光。</p>
</li>
<li><p>局部变量</p>
<p><strong>局部变量的生命周期是在一个大括号内</strong>，即一个所处<strong>块</strong>结束。</p>
<p>所以<strong>循环内、方法内</strong>定义的变量都是<strong>局部变量</strong>。他们都<strong>虚拟机栈</strong>中（<strong>一层循环/一次方法调用使用一个栈帧，即栈的一格</strong>）。</p>
<p>（<strong>循环不会导致栈溢出，因为每一层循环入栈之后，该层循环结束就销毁</strong>）</p>
<p><strong>局部区域可以引用到全局变量，外部区域无法引用局部变量</strong>（内部括号可以识别外部括号的变量，所以不能在局部区域定义一个和外部变量一样的变量。但是外部环境不认识局部变量，局部环境内定义的局部变量的生命周期随局部环境（栈）的释放而释放。）</p>
<p><strong>【循环或方法内创建的对象，也是储存在堆中，而引用才是储存在栈中，java里没有局部对象，<u>凡是new创建的对象，都是在堆中</u>】</strong></p>
</li>
<li><p>栈溢出：StackOverflow</p>
<p>栈过深（递归深度太大）</p>
<p>局部变量过多</p>
<p>（数组、List、map数据过大：这些结构里存放对象的引用，引用过多，实际上和2条一样，也是局部变量过多导致栈溢出）</p>
</li>
<li><p>进程和线程有什么区别</p>
<p>根本区别：<strong>进程</strong>是操作系统<strong>资源分配</strong>的基本单位，而<strong>线程</strong>是<strong>任务调度和执行</strong>的基本单位</p>
<p>在开销方面：<strong>每个进程都有独立的代码和数据空间（程序上下文），程序之间的切换会有较大的开销</strong>；<strong>线程可以看做轻量级的进程，同一类线程共享代码和数据空间，每个线程都有自己独立的运行栈和程序计数器（PC），线程之间切换的开销小</strong>。</p>
<p>所处环境：在操作系统中能同时运行多个进程（程序）；而在同一个进程（程序）中有多个线程同时执行（<strong>通过CPU调度，在每个时间片中只有一个线程执行</strong>）</p>
<p>内存分配方面：<strong>系统在运行的时候会为每个进程分配不同的内存空间</strong>；而对线程而言，除了CPU外，系统不会为线程分配内存（线程所使用的资源来自其所属进程的资源），线程组之间只能共享资源。</p>
<p>包含关系：没有线程的进程可以看做是单线程的，如果一个进程内有多个线程，则执行过程不是一条线的，而是多条线（线程）共同完成的；线程是进程的一部分，所以线程也被称为轻权进程或者轻量级进程。</p>
</li>
<li><p>协程</p>
<p>协程（Coroutines）是一种比线程更加轻量级的存在，正如一个进程可以拥有多个线程一样，<strong>一个线程可以拥有多个协程</strong></p>
<p><strong>协程不是被操作系统内核所管理的</strong>，而是完全由程序所控制，也就是在用户态执行。这样带来的好处是性能大幅度的提升，因为不会像线程切换那样消耗资源。<strong>协程仅仅是一个特殊的函数</strong>，协程与进程和线程不是一个维度的。一个线程内的多个协程虽然可以切换，但是<strong>多个协程是串行执行的，只能在一个线程内运行，没法利用CPU多核能力。</strong>协程与进程一样，切换是存在上下文切换问题的。协程的切换者是用户（编程者或应用程序）</p>
</li>
</ol>
<h1 id="计算机网络"><a href="#计算机网络" class="headerlink" title="计算机网络"></a>计算机网络</h1><ol>
<li><p>IPV4是32位（4B），IPV6是128位（16B）</p>
</li>
<li><p>socket</p>
<p>套接字可以看成是两个网络应用程序进行通信时，各自通信连接中的一个<strong>端点</strong>。通信时，其中的一个网络应用程序将<strong>要传输的一段信息写入它所在主机的Socket中，该Socket通过网络接口卡的传输介质将这段信息发送给另一台主机的Socket中</strong>，使这段信息能传送到其他程序中。因此，<strong>两个应用程序之间的数据传输要通过套接字来完成</strong></p>
<p>socket有三种类型：</p>
<p><strong>SOCK_STREAM：即TCP</strong>，工作在传输层，进程之间通信（IP＋端口），需要先建立连接，保证数据的完整性和有序性，有分包机制，有流量控制机制<br><strong>SOCK_DGRAM：即UDP</strong>，工作在传输层，进程之间通信（IP＋端口），无连接，不保zd证数据完整性，不保证有序性，有分包机制，无流量控制机制<br><strong>SOCK_RAW：即IP</strong>，工作在网络层，主机之间通信（IP），无连接，不保证数据完整性和有序性，无分包机制，无流量控制</p>
<p>socket调用流程：</p>
<p>bind()绑定本地地址，connect()建立连接，listen()等待连接，accept()接受连接请求，send(),recv(),dendto(),recvfrom(),close()</p>
<p>分为阻塞模式和非阻塞模式，非阻塞要使用select()</p>
<p>更多相关：<a href="https://www.jianshu.com/p/066d99da7cbd" target="_blank" rel="noopener">https://www.jianshu.com/p/066d99da7cbd</a></p>
<p>多路复用机制：<a href="https://www.jianshu.com/p/397449cadc9a" target="_blank" rel="noopener">https://www.jianshu.com/p/397449cadc9a</a></p>
</li>
<li><p>TCP和UDP的区别，什么时候使用谁，哪些用了TCP哪些用了UDP？</p>
<p>TCP是面向连接的，UDP是无连接的</p>
<p>1、<strong>基于连接与无连接</strong>；</p>
<p>2、<strong>对系统资源的要求（TCP较多，UDP少）</strong>；</p>
<p>3、<strong>TCP保证【数据正确性】，UDP可能丢包</strong>；</p>
<p><strong>4、UDP更保证即时性</strong></p>
<p>5、<strong>TCP保证数据【顺序】，UDP不保证</strong>。</p>
<p>6、TCP只能1对1，UDP不限制</p>
<p>7、由于历史的原因，互联网上物理链路的最小MTU = 576，基于UDP传输的DNS为了限制报文不超过576，所以将DNS报文限制在512字节。<strong>这样一旦DNS查询应答超过512字节，基于UDP的DNS就只有截短为512字节，那么用户得到的DNS应答就是不完整的。</strong>为了克服这种困难，最简单的方式就是使用TCP，来重新查询。但<strong>使用UDP同样可以传输远远大于576字节的数据，只要应用程序可以标识数据ID。</strong></p>
<p>UDP使用尽最大努力交付，即不保证可靠交付</p>
<p><a href="https://blog.csdn.net/huanglei305/article/details/99712771" target="_blank" rel="noopener">https://blog.csdn.net/huanglei305/article/details/99712771</a> </p>
</li>
<li><p>DNS使用TCP or UDP</p>
<ul>
<li>使用UDP传输是由于效率高，传输小于等于512字节报文。</li>
<li>使用TCP传输是由于可以传输大于512字节报文。</li>
<li>使用签名是保证数据来源的可靠性。</li>
<li>使用TCP传输，同样是可以传输证书链、签名。</li>
<li>使用UDP同样可以传输远远大于576字节的数据，只要应用程序可以标识数据ID。</li>
</ul>
</li>
<li><p>游戏中使用TCP or UDP</p>
<p>都有</p>
<p>对于实时性要求较高的部分，使用UDP（比如FPS、MOBA，需要低延迟）</p>
<p>其余的可以使用TCP</p>
</li>
<li><p>三次握手，四次挥手，详细状态、过程、参数</p>
<p>1、<strong>ACK</strong> 是TCP报头的控制位之一，对数据进行<strong>确认</strong>。确认由目的端发出， 用它来告诉发送端这个序列号之前的数据段都收到了。 比如确认号为X，则表示前X-1个数据段都收到了，只有当ACK=1时,确认号才有效，当ACK=0时，确认号无效，这时会要求重传数据，保证数据的完整性。</p>
<p>2、<strong>SYN 同步序列号，TCP建立连接时将这个位置1。</strong></p>
<p>3、<strong>FIN</strong> 发送端完成发送任务位，当TCP完成数据传输需要断开时,，提出断开连接的一方将这位置1。</p>
<p><strong>状态变化：客户端 SYN-SENT-&gt;ESTABLISHED 服务端：LISTEN-&gt;SYN-RCVD-&gt;ESTABLISHED</strong></p>
<p><img src="//aisaka.cloud/计算机理论/操作系统与计算机网络补充/0.png" alt="img"></p>
<p>状态变化：客户端ESTABLISHED-&gt;<strong>FIN-WAIT-1-&gt;FIN-WAIT2</strong>-&gt;<strong>TIME WAIT-</strong>&gt;CLOSED</p>
<p>服务端：ESTABLISHED-&gt;<strong>CLOSE-WAIT</strong>-&gt;<strong>LAST-ACK</strong>-&gt;CLOSED</p>
<p><img src="//aisaka.cloud/计算机理论/操作系统与计算机网络补充/1.png" alt="img"></p>
<p>服务端的<strong>CLOSE-WAIT</strong>状态是为了<strong>让服务器端发送还未传送完毕的数据</strong>，传送完毕之后，服务器会发送 FIN 连接释放报文</p>
<p>客户端的<strong>TIME_WAIT</strong>状态是为了<strong>确保最后一个确认报文能够到达（如果服务端没收到，会再次重发连接释放报文请求）</strong>，让本连接持续时间内所产生的所有报文都从网络中消失</p>
</li>
<li><p>TCP头包含哪些信息？三握四挥参数怎么变化？</p>
<p>几大参数：<strong>源端口、目的端口</strong>、标记字节流序号[<strong>序号seq，确认号ack</strong>]，<strong>数据偏移量</strong>（数据部分offset），状态标志位[<strong>同步SYN，确认ACK，终止FIN</strong>]，窗口值（不提），校验和（不提）</p>
<p><strong>连接请求报文</strong>：SYN=1，ACK=0</p>
<p><strong>连接确认/确认报文</strong>：SYN=1，ACK=1</p>
<p><strong>客户端连接释放报文</strong>：FIN=1</p>
<p><strong>服务端连接释放报文</strong>：FIN=1，ACK=1</p>
<p>注意，发送和接收是两个字节流，所以seq和ack标号也是不同的起点，x，y</p>
<p>A-&gt;B seq=x，那B-&gt;A seq=y，ack=x+1，A-&gt;B seq=x+1,ack=y+1</p>
<p><strong>注意：TCP头部有端口信息没IP信息！IP信息是在IP包头中</strong></p>
</li>
<li><p>TCP四大算法</p>
<p><strong>TCP可靠传输</strong>（<strong>超时重传</strong>）</p>
<p><strong>TCP滑动窗口</strong>（缓存，发送窗口内的字节都允许被发送，接收窗口内的字节都允许被接收。<strong>提高【吞吐量】，【进行流量控制】（下面）</strong>；这样就可以发很多包，而不用等确认了）</p>
<p><strong>TCP流量控制</strong>（<strong>接收方的TCP报文中，设置发送方窗口的大小！</strong>从而影响发送方的发送速率。将窗口字段设置为 0，则发送方不能发送数据。）</p>
<p><strong>TCP拥塞控制（通过各种算法来设定报文段一轮的发送数量。慢开始、拥塞避免；快重传、快恢复）</strong></p>
<p>流量控制和拥塞控制都是控制速率，但不同在于<strong>流量控制是为了让接收方能来得及接收，而拥塞控制是为了降低整个网络的拥塞程度。</strong></p>
</li>
<li><p><strong>网络层实现主机之间的通信，而链路层实现具体每段链路之间的通信。因此在通信过程中，IP 数据报的源地址和目的地址始终不变，而 MAC 地址随着链路的改变而改变。【路由器中包含arp表和路由表，arp表是记录ip地址和mac对应关系，相邻路由器可以看做广播域，路由器也是通过arp知道相连路由器的mac地址】</strong></p>
<p>主机在进行ip地址请求的时候，<strong>①先找网关路由器的MAC地址</strong>：先通过arp协议找到本地网关路由器（如果有交换机，则该帧到达交换机后由交换机进行广播该arp请求帧），然后网关路由器广播回复arp请求，<strong>②然后开始IP请求过程</strong>（此时MAC目的地址为网关路由器，IP目的地址为目的IP），<strong>网关路由器查路由表判断该ip地址是否属于本网络</strong>，如果是本网络，则不会走外网，直接内网ARP协议，MAC直达；如果是外网，就走下一跳（内部网关协议：RIP OSPF或外部网关协议：BGP）。</p>
<p><strong>ARP协议</strong>：每个主机都有一个 <strong>ARP 高速缓存，里面有本局域网上的各主机和路由器的 IP 地址到 MAC 地址的映射表。</strong>（本地路由表）</p>
<p>如果主机 A 知道主机 B 的 IP 地址，但是 ARP 高速缓存中没有该 IP 地址到 MAC 地址的映射，此时主机 A 通过<strong>广播的方式发送 ARP 请求分组</strong>，主机 B 收到该请求后会<strong>发送 ARP 响应分组给主机 A 告知其 MAC 地址</strong>，随后主机 A 向其高速缓存中写入主机 B 的 IP 地址到 MAC 地址的映射。</p>
</li>
<li><p><strong>【交换器、路由器的区别：交换机工作在链路层，只工作在一个广播域；路由器工作在传输层，连接异构网络，隔离广播域】</strong></p>
</li>
<li><p>路由器工作原理</p>
<p><strong>路由表根据这个数据包的的目的IP，然后查出下一跳的IP地址，然后根答据ARP解析得到下一跳，然后再将链路层封装好，发送出去。</strong></p>
<p>路由器的工作原理</p>
<p>　　1)HostA在网络层将来自上层的报文封装成IP数据包，其中源IP地址为自己，目标IP地址是HostB，HostA会用本机配置的24位<a href="http://cpro.baidu.com/cpro/ui/uijs.php?adclass=0&amp;app_id=0&amp;c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=19&amp;is_app=0&amp;jk=9c8c6a7fafd6e446&amp;k=%D7%D3%CD%F8%D1%DA%C2%EB&amp;k0=%D7%D3%CD%F8%D1%DA%C2%EB&amp;kdi0=0&amp;luki=1&amp;n=10&amp;p=baidu&amp;q=67051059_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=46e4d6af7f6a8c9c&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;td=1740074&amp;tu=u1740074&amp;u=http%3A%2F%2Fwww%2Eeducity%2Ecn%2Fnet%2F1284034%2Ehtml&amp;urlid=0" target="_blank" rel="noopener">子网掩码</a>与目标地址进行“与”运算，得出目标地址与本机不是同一网段，因此发送HostB的数据包需要经过网关路由A的转发。</p>
<p>　　2)HostA通过ARP请求获取网关<a href="http://cpro.baidu.com/cpro/ui/uijs.php?adclass=0&amp;app_id=0&amp;c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=19&amp;is_app=0&amp;jk=9c8c6a7fafd6e446&amp;k=%C2%B7%D3%C9&amp;k0=%C2%B7%D3%C9&amp;kdi0=0&amp;luki=4&amp;n=10&amp;p=baidu&amp;q=67051059_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=46e4d6af7f6a8c9c&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;td=1740074&amp;tu=u1740074&amp;u=http%3A%2F%2Fwww%2Eeducity%2Ecn%2Fnet%2F1284034%2Ehtml&amp;urlid=0" target="_blank" rel="noopener">路由</a>A的E0口的MAC地址，并在链路层将路由器E0接口的MAC地址封装成目标MAC地址，源MAC地址是自己。</p>
<p>　　3)路由器A从E0可接收到数据帧，把数据链路层的封装去掉，并检查路由表中是否有目标IP地址网段(即192.168.2.2的网段)相匹配的的项，根据路由表中记录到192.168.2.0网段的数据请发送给下一跳地址10.1.1.2，因此数据在路由器A的E1口重新封装，此时，源MAC地址是路由器A的E1接口的MAC地址，封装的目标MAC地址则是<a href="http://cpro.baidu.com/cpro/ui/uijs.php?adclass=0&amp;app_id=0&amp;c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=19&amp;is_app=0&amp;jk=9c8c6a7fafd6e446&amp;k=%C2%B7%D3%C9%C6%F7&amp;k0=%C2%B7%D3%C9%C6%F7&amp;kdi0=0&amp;luki=6&amp;n=10&amp;p=baidu&amp;q=67051059_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=46e4d6af7f6a8c9c&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;td=1740074&amp;tu=u1740074&amp;u=http%3A%2F%2Fwww%2Eeducity%2Ecn%2Fnet%2F1284034%2Ehtml&amp;urlid=0" target="_blank" rel="noopener">路由器</a>2的E1接口的MAC地址。</p>
<p>　　4)路由B从E1口接收到数据帧，同样会把数据链路层的封装去掉，对目标IP地址进行检测，并与路由表进行匹配，此时发现目标地址的网段正好是自己E0口的直连网段，路由器B通过ARP广播，获知HostB的MAC地址，此时数据包在路由器B的E0接口再次封装，源MAC地址是路由器B的E0接口的MAC地址，目标MAC地址是HostB的MAC地址。封装完成后直接从路由器的E0接口发送给HostB。</p>
<p>　　5)此时HostB才会收到来自HostA发送的数据。</p>
<p>　　总结：<a href="http://cpro.baidu.com/cpro/ui/uijs.php?adclass=0&amp;app_id=0&amp;c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=19&amp;is_app=0&amp;jk=9c8c6a7fafd6e446&amp;k=%C2%B7%D3%C9&amp;k0=%C2%B7%D3%C9&amp;kdi0=0&amp;luki=4&amp;n=10&amp;p=baidu&amp;q=67051059_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=46e4d6af7f6a8c9c&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;td=1740074&amp;tu=u1740074&amp;u=http%3A%2F%2Fwww%2Eeducity%2Ecn%2Fnet%2F1284034%2Ehtml&amp;urlid=0" target="_blank" rel="noopener">路由</a>表负责记录一个网络到另一个网络的路径，因此<a href="http://cpro.baidu.com/cpro/ui/uijs.php?adclass=0&amp;app_id=0&amp;c=news&amp;cf=1001&amp;ch=0&amp;di=128&amp;fv=19&amp;is_app=0&amp;jk=9c8c6a7fafd6e446&amp;k=%C2%B7%D3%C9%C6%F7&amp;k0=%C2%B7%D3%C9%C6%F7&amp;kdi0=0&amp;luki=6&amp;n=10&amp;p=baidu&amp;q=67051059_cpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=46e4d6af7f6a8c9c&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;td=1740074&amp;tu=u1740074&amp;u=http%3A%2F%2Fwww%2Eeducity%2Ecn%2Fnet%2F1284034%2Ehtml&amp;urlid=0" target="_blank" rel="noopener">路由器</a>是根据路由表工作的。</p>
</li>
<li><p>为什么要划分子网？</p>
<p>划分子网就是<strong>人为地将一个公网IP分成多个子网段</strong>，<strong>方便管理</strong>。<br>就算不划分也可以，<strong>不过这个公网IP下的所有计算机都能互相连接而不受限制，那么就不好管理机密数据了</strong>。</p>
</li>
<li><p>三个表</p>
<p>路由表是IP地址可达范围的一张表，相当于是网络里的地图，负责三层的数据转发；<br>ARP表示IP地址和MAC地址的逻辑关系表；<br>MAC地址表是MAC地址和交换机接口的逻辑关系表，负责二层的数据转发</p>
<p>MAC不会走出广播域</p>
<p>路由器在要跨网段的时候起作用</p>
</li>
<li><p>一些应用层协议是基于什么底层协议实现的？【继续补充】</p>
<p>DNS（TCP/UDP）</p>
<p>FTP（TCP）</p>
<p>DHCP（UDP）</p>
<p>Ping（网络层ICMP，ICMP封装在IP数据报中），Traceroute（UDP）</p>
</li>
<li><p>web请求页面：DHCP-ARP-DNS-HTTP(基于TCP)</p>
</li>
<li><p>一个报文段从<strong>发送再到接收到确认</strong>所经过的时间称为<strong>往返时间 RTT</strong></p>
</li>
<li><p>内部专用网络要想将内部地址转换为外部地址就需要<strong>网络地址转换NAT</strong></p>
</li>
<li><p><strong>虚拟专用网络VPN</strong> 使用<strong>公用的互联网作为本机构各专用网之间的通信载</strong>体。专用指机构内的主机只与本机构内的其它主机通信；<strong>虚拟指好像是，而实际上并不是，它有经过公用的互联网</strong>。</p>
<p><strong>VPN会对内部数据进行加密，只有目标路由器才能解密</strong></p>
</li>
<li><p>数据传输单元</p>
<p>应用层——消息</p>
<p>传输层——数据段(segment)</p>
<p>网络层——分组、数据包，包（packet）</p>
<p>链路层——帧（frame）</p>
<p>物理层——P-PDU（bit）</p>
</li>
<li><p>HTTP的post和get请求</p>
<p>GET 用于获取资源，而 POST 用于传输实体主体。</p>
<p><strong>GET 的参数是以查询字符串出现在 URL 中，而 POST 的参数存储在实体主体中。</strong></p>
<p><strong>安全的 HTTP 方法不会改变服务器状态，也就是说它【只是可读】的。</strong>GET 方法是安全的，而 POST 却不是，因为 POST 的目的是传送实体主体内容，这个内容可能是用户上传的表单数据，<strong>上传成功之后，服务器可能把这个数据存储到数据库中，因此状态也就发生了改变。</strong></p>
<p>HEAD 获取报文首部</p>
<p>PUT 上传文件</p>
<p>…….（）</p>
</li>
<li><p>DNS 权威解析记录，DNS过程</p>
<p>由本地服务器代理，先查根，然后迭代/递归的方式去查顶级，权威</p>
<p><a href="https://jingyan.baidu.com/article/ad310e80e8f6c91848f49e4c.html" target="_blank" rel="noopener">https://jingyan.baidu.com/article/ad310e80e8f6c91848f49e4c.html</a></p>
<p>一个服务器所负责管辖(或有权限)的范围叫做区(zone)</p>
<p>权限域名服务器：负责一个“区”的域名服务器。</p>
<p>很多情况下，根域名服务器并不直接把待查询的域名直接解析出IP地址，而是告诉本地域名服务器下一步应当找哪一个顶级域名服务器进行查询。</p>
<p><img src="https://pic4.zhimg.com/v2-1340b0df97e47b2603ac6b68fec77cfb_b.jpg" alt="img"></p>
</li>
<li><p>DNS记录类型</p>
<p><strong>A记录</strong>：A记录就是<strong>服务器的IP</strong>，域名绑定A记录就是告诉DNS，当输入域名的时候给你引导向设置在DNS的A记录所对应的服务器。</p>
<p><strong>CNAME记录</strong>：别名。这种记录允许您将<strong>多个域名映射到同一台计算机</strong>。</p>
<p><strong>MX记录</strong>：是邮件交换记录，它指向一个邮件服务器，用于电子邮件系统发邮件时根据 收信人的地址后缀来定位邮件服务器</p>
<p><strong>NS记录</strong>：Name Server 是一种域名服务器记录，用来明确当前你的域名是由哪个DNS服务器来进行解析的。</p>
</li>
</ol>

        </div>
        <!-- .entry-content -->
        <div class="single-reward">
          <div class="reward-open">赏
            <div class="reward-main">
              <ul class="reward-row">
                <li class="alipay-code"><img src="/images/donate/AliPayQR.jpg"></li>
                <li class="wechat-code"><img src="/images/donate/WeChanQR.jpg"></li>
              </ul>
            </div>
          </div>
        </div>
        <div style="text-align:center; width: 100%" class="social-share share-mobile" data-disabled="diandian, tencent"></div>
        <footer class="post-footer">
          <div class="post-lincenses"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="nofollow"><i class="fa fa-creative-commons" aria-hidden="true"></i> 知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a></div>
          <div class="post-tags">
          </div>
          <div class="post-share">
            <div class="social-share sharehidden share-component"></div>
            <i class="iconfont show-share icon-forward"></i>
          </div>
        </footer><!-- .entry-footer -->
      </article>
      <!-- #post-## -->
      <div class="toc" style="background: none;"></div>
      <section class="post-squares nextprev">
        
          
            <div class="post-nepre half previous">
          
            <a href="/程序语言/JAVA容器/" rel="prev">
              <div class="background">
                <img class="lazyload" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg" data-src="" style="width: 100%; height: 100%; object-fit: cover; pointer-events: none;" onerror="imgError(this,3)" src="">
              </div>
              <span class="label">
              Previous Post</span>
              <div class="info">
                <h3>
                JAVA容器</h3>
                <hr>
              </div>
            </a>
          </div>
        
        
          
            <div class="post-nepre half next">
          
            <a href="/算法与数据结构/树-图/" rel="next">
              <div class="background">
                <img class="lazyload" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg" data-src="" style="width: 100%; height: 100%; object-fit: cover; pointer-events: none;" onerror="imgError(this,3)" src="">
              </div>
              <span class="label">
              Next Post</span>
              <div class="info">
                <h3>
                查找算法&amp;图的应用</h3>
                <hr>
              </div>
            </a>
          </div>
        
      </section>
      
<div id="vcomments"></div>
<script>
  window.onload = function(){
      var valine = new Valine();
      valine.init({
        el: '#vcomments',
        appId: "d2ULHdiL7VOfJf17rpCD4DOX-gzGzoHsz",
        appKey: "OLf7QaP1oTtqKhulLHuajYKu",
        path: window.location.pathname,
        placeholder: "你是我一生只会遇见一次的惊喜 ..."
      })
  }
</script>

      <section class="author-profile">
        <div class="info" itemprop="author" itemscope="" itemtype="https://schema.org/Person">
          <a href="" class="profile gravatar"><img src="" itemprop="image" alt="" height="70" width="70"></a>
          <div class="meta">
            <span class="title">Author</span>
            <h3 itemprop="name">
            <a href="" itemprop="url" rel="author"></a>
            </h3>
          </div>
        </div>
        <hr>
        <p><i class="iconfont icon-write"></i></p>
      </section>
    </main><!-- #main -->
  </div><!-- #primary -->
</div>



    </div>    
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="请输入关键词..."/>
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            // PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
    <!-- <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 aisaka<br>
      powered_by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer> -->
<footer id="colophon" class="site-footer" role="contentinfo">
  <div class="site-info">
    <div class="footertext">
      <div class="img-preload">
        <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/wordpress-rotating-ball-o.svg">
        <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/disqus-preloader.svg">
      </div>
      <p style="color: #666666;">&copy 2016~2021</p>
    </div>
    <div class="footer-device">
    <p style="font-family: 'Ubuntu', sans-serif;">
        <span style="color: #b9b9b9;">
          aisaka
        </span>
      </p>
    </div>
  </div><!-- .site-info -->
</footer>



<!-- <script src="/js/tocbot.js"></script> -->
<script type="text/javascript" src="/js/lib.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script type="text/javascript" src="/js/InsightSearch.js"></script>
<script type="text/javascript" src="/js/jquery.fancybox.min.js"></script>
<script type="text/javascript" src="/js/zoom.min.js"></script>
<script type="text/javascript" src="/js/sakura-app.js"></script>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='//unpkg.com/valine@1.3.4/dist/Valine.min.js'></script>
<script src="/js/botui.js"></script>
<!-- 不蒜子 网页计数器 -->
<script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script> -->
<script type="text/javascript">
/* <![CDATA[ */
if (/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  var Poi = {"pjax":"1","movies":{"url": "","name":"","live":"close"},"windowheight":"fixed","codelamp":"close","ajaxurl":"","order":"asc","formpostion":"bottom"};
} else {
  var Poi = {"pjax":"1","movies":{"url": "","name":"","live":"open"},"windowheight":"auto","codelamp":"close","ajaxurl":"","order":"asc","formpostion":"bottom"};
}
/* ]]> */

</script>
<script>
$(document).ready(function() {
  if ($(".toc").length > 0 && document.body.clientWidth > 1200) {
    if ($(".pattern-center").length > 0) { //有图的情况
      tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', // 放置目录的容器
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', // 正文内容所在
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', // 需要索引的标题级别
          headingsOffset: -400,
          scrollSmoothOffset: -85
      });
    } else {
      tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', // 放置目录的容器
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', // 正文内容所在
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', // 需要索引的标题级别
          headingsOffset: -85,
          scrollSmoothOffset: -85
      });
    }
    var offsetTop = $('.toc').offset().top - 95;
    window.onscroll = function() {
      var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
      if (scrollTop >= offsetTop) {
        $('.toc').addClass('toc-fixed');
      } else {
        $('.toc').removeClass('toc-fixed');
      }
    }
  }
});
</script>

    <div class="openNav no-select" style="height: 50px;">
      <div class="iconflat no-select" style="width: 50px; height: 50px;">
        <div class="icon"></div>
      </div>
      <div class="site-branding search-form-submit">
        <i class="iconfont js-toggle-search iconsearch icon-search"></i>
      </div>
    </div>
  </section>
  <div id="mo-nav" class="">
  <div class="m-avatar">
    <img src="/images/img/000.jpg">
  </div>
  <p style="text-align: center; color: #333; font-weight: 900; font-family: 'Ubuntu', sans-serif; letter-spacing: 1.5px">宵晓咲</p>
  <p style="text-align: center; word-spacing: 20px;">
    
  </p>
  <ul id="menu-new-1" class="menu">
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  " aria-hidden="true"></i>
            首页
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/archives">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
            时间线
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="javascript:;">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
            ACG
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/categories/Anime/">
                  <i class="fa " aria-hidden="true"></i>
                  动画
                </a>
              </li>
            
              <li>
                <a href="/categories/Game/">
                  <i class="fa " aria-hidden="true"></i>
                  游戏
                </a>
              </li>
            
              <li>
                <a href="/categories/Music/">
                  <i class="fa " aria-hidden="true"></i>
                  音乐
                </a>
              </li>
            
              <li>
                <a href="/categories/游戏设计/">
                  <i class="fa " aria-hidden="true"></i>
                  游戏设计
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="javascript:;">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-book faa-shake" aria-hidden="true"></i>
            随想
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/categories/日记/">
                  <i class="fa " aria-hidden="true"></i>
                  日记
                </a>
              </li>
            
              <li>
                <a href="/categories/阅读/">
                  <i class="fa " aria-hidden="true"></i>
                  阅读
                </a>
              </li>
            
              <li>
                <a href="/categories/随笔/">
                  <i class="fa " aria-hidden="true"></i>
                  随笔
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="javascript:;">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-code faa-shake" aria-hidden="true"></i>
            技术
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/categories/程序语言/">
                  <i class="fa " aria-hidden="true"></i>
                  程序
                </a>
              </li>
            
              <li>
                <a href="/categories/人工智能/">
                  <i class="fa " aria-hidden="true"></i>
                  人工智能
                </a>
              </li>
            
              <li>
                <a href="/categories/开发/">
                  <i class="fa " aria-hidden="true"></i>
                  开发
                </a>
              </li>
            
              <li>
                <a href="/categories/数据库与中间件/">
                  <i class="fa " aria-hidden="true"></i>
                  中间件
                </a>
              </li>
            
              <li>
                <a href="/categories/网络与云/">
                  <i class="fa " aria-hidden="true"></i>
                  网络
                </a>
              </li>
            
              <li>
                <a href="/categories/算法与数据结构/">
                  <i class="fa " aria-hidden="true"></i>
                  算法
                </a>
              </li>
            
              <li>
                <a href="/categories/计算机理论/">
                  <i class="fa " aria-hidden="true"></i>
                  CS
                </a>
              </li>
            
              <li>
                <a href="/categories/论文阅读笔记/">
                  <i class="fa " aria-hidden="true"></i>
                  论文
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="javascript:;">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-leaf faa-wrench" aria-hidden="true"></i>
            其它
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/categories/硬件/">
                  <i class="fa " aria-hidden="true"></i>
                  硬件
                </a>
              </li>
            
              <li>
                <a href="/categories/博客/">
                  <i class="fa " aria-hidden="true"></i>
                  博客
                </a>
              </li>
            
              <li>
                <a href="/categories/工具/">
                  <i class="fa " aria-hidden="true"></i>
                  工具
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="javascript:;">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-list-ul faa-vertical" aria-hidden="true"></i>
            清单
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/tags/悦读/">
                  <i class="fa fa-th-list faa-bounce" aria-hidden="true"></i>
                  书单
                </a>
              </li>
            
              <li>
                <a href="/bangumi/">
                  <i class="fa fa-film faa-vertical" aria-hidden="true"></i>
                  番组
                </a>
              </li>
            
              <li>
                <a href="/music/">
                  <i class="fa fa-headphones" aria-hidden="true"></i>
                  歌单
                </a>
              </li>
            
              <li>
                <a href="/tags/图集/">
                  <i class="fa fa-photo" aria-hidden="true"></i>
                  图集
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="/comment/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-pencil-square-o faa-tada" aria-hidden="true"></i>
            留言板
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/links/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-link faa-shake" aria-hidden="true"></i>
            Link
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/about/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-meetup faa-shake" aria-hidden="true"></i>
            我
          </span>
        </a>
        
      </li>
    
  </ul>
  <p style="text-align: center; font-size: 13px; color: #b9b9b9;">&copy 2019 hexo-sakura</p>
</div>
<button onclick="topFunction()" class="mobile-cd-top" id="moblieGoTop" title="Go to top" style="display: none;"><i class="fa fa-chevron-up" aria-hidden="true"></i></button>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>
<!-- require MetingJS -->
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>
<style>
  .aplayer .aplayer-lrc {
    height: 35px;
  }
  .aplayer .aplayer-lrc p{
    font-size: 16px;
    font-weight: 700;
    line-height: 18px !important;
  }
  .aplayer .aplayer-lrc p.aplayer-lrc-current{
    color: #FF1493;
  }
  .aplayer.aplayer-narrow .aplayer-body{
    left: -66px !important;
  }
  .aplayer.aplayer-fixed .aplayer-lrc {
    display: none;
  }
  .aplayer .aplayer-lrc.aplayer-lrc-hide {
      display:none !important;
  }
  .aplayer.aplayer-fixed .lrc-show {
    display: block;
    background: rgba(255, 255, 255, 0.8);
  }
</style>
<meting-js

    id=""

    server="netease"

    type="playlist"

    fixed="true"

    autoplay="false"

    loop="all"

    order="random"

    preload="auto"

    volume="0.7"

    mutex="true"

</meting-js>
<!--这里我want aplayer失效-->
<script>
  $(function(){
    $('body').on('click', '.aplayer', function(){
      if($('.aplayer-button').hasClass('aplayer-play')) {
        $('.aplayer-lrc').removeClass('lrc-show');
      } else {
        $('.aplayer-lrc').addClass('lrc-show');
      }
    })
  });
</script>

</body>
</html>