<!DOCTYPE html>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  
  <title itemprop="name">docker | 宵晓咲</title>
  
    <link rel="shortcut icon" href="/images/img/apple-touch-icon-next.png">
  
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+SerifMerriweather|Merriweather+Sans|Source+Code+Pro|Ubuntu:400,700|Noto+Serif+SC" media="all">
  <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
  <link rel="stylesheet" id="saukra_css-css" href="/css/style.css" type="text/css" media="all">
  <link rel="stylesheet" href="/css/lib.min.css" media="all">
  <link rel="stylesheet" href="/css/font.css" media="all">
  <link rel="stylesheet" href="/css/insight.css" media="all">
  <link rel="stylesheet" href="/css/jquery.fancybox.min.css" media="all">
  <link rel="stylesheet" href="/css/zoom.css" media="all">
  <link rel="stylesheet" type="text/css" href="/css/sharejs.css">
<!--   <link rel="stylesheet" id="saukra_css-css" href="https://2heng.xin/wp-content/cache/autoptimize/css/autoptimize_ad42a61f4c7d4bdd9f91afcff6b5dda5.css
" type="text/css" media="all"> -->
  <script>
  /*Initial Variables*/
  var mashiro_option = new Object();
  var mashiro_global = new Object();
  mashiro_option.NProgressON = true;
  /* 
   * 邮箱信息之类的东西可以填在这里，这些js变量基本都作用于sakura-app.js
   * 这样的设置仅是为了方便在基于PHP开发的主题中设置js变量，既然移植到了Node上，我想或许可以精简这一逻辑吧
   */
  mashiro_option.email_domain = "";
  mashiro_option.email_name = "";
  mashiro_option.cookie_version_control = "";
  mashiro_option.qzone_autocomplete = false;
  mashiro_option.site_name = "宵晓咲";
  mashiro_option.author_name = "宵晓咲";
  mashiro_option.site_url = "https://aisaka.cloud";
  mashiro_option.v_appId = "d2ULHdiL7VOfJf17rpCD4DOX-gzGzoHsz";
  mashiro_option.v_appKey = "OLf7QaP1oTtqKhulLHuajYKu";
  mashiro_option.mathjax = "1";
  mashiro_option.qq_api_url = "https://api.mashiro.top/qqinfo/"; 
  mashiro_option.qq_avatar_api_url = "https://api.mashiro.top/qqinfo/";

  // mashiro_option.jsdelivr_css_src = "https://cdn.jsdelivr.net/gh/moezx/cdn@3.4.5/css/lib.min.css";
  // mashiro_option.float_player_on = true;

  /*End of Initial Variables*/
  </script>
  <script type="text/javascript">
  var bg = "/images/bg/0.jpg".split(",");
  var bgindex = Math.floor(Math.random()*bg.length);
  if (!!window.ActiveXObject || "ActiveXObject" in window) { //is IE?
    alert('朋友，IE浏览器未适配哦~');
  }
  </script>
  <style type="text/css">
  .hljs-ln{border-collapse:collapse}.hljs-ln td{padding:0}.hljs-ln-n:before{content:attr(data-line-number)}
  </style>
  <style type="text/css">.site-top .lower nav{display:block !important;}.author-profile i,.post-like a,.post-share .show-share,.sub-text,.we-info a,span.sitename,.post-more i:hover,#pagination a:hover,.post-content a:hover,.float-content i:hover{color:#FE9600}.feature i,.download,.navigator i:hover,.links ul li:before,.ar-time i,span.ar-circle,.object,.comment .comment-reply-link,.siren-checkbox-radio:checked + .siren-checkbox-radioInput:after{background:#FE9600}::-webkit-scrollbar-thumb{background:#FE9600}.download,.navigator i:hover,.link-title,.links ul li:hover,#pagination a:hover,.comment-respond input[type='submit']:hover{border-color:#FE9600}.entry-content a:hover,.site-info a:hover,.comment h4 a,#comments-navi a.prev,#comments-navi a.next,.comment h4 a:hover,.site-top ul li a:hover,.entry-title a:hover,#archives-temp h3,span.page-numbers.current,.sorry li a:hover,.site-title a:hover,i.iconfont.js-toggle-search.iconsearch:hover,.comment-respond input[type='submit']:hover{color:#FE9600}.comments .comments-main{display:block !important;}.comments .comments-hidden{display:none !important;}background-position:center center;background-attachment:inherit;}
  </style>
</head>
</html>
<body class="page-template page-template-user page-template-page-analytics page-template-userpage-analytics-php page page-id-1297 chinese-font serif isWebKit">
  <div class="scrollbar" id="bar">
  </div>
  <a href="#" class="cd-top faa-float animated"></a>
  <section id="main-container">
    <div class="headertop ">
  <div id="banner_wave_1"></div>
  <div id="banner_wave_2"></div>
  <div id="preloader"></div>
  <figure id="centerbg" class="centerbg">
    <div class="focusinfo no-select">
      <div class="header-tou">
        <!-- <a href="https://aisaka.cloud"> -->
          <img src="/images/img/112.jpg">
        <!-- </a> -->
      </div>
      <div class="header-info">
        <p>且听风吟</p>
        <div class="top-social_v2">
          <li id="bg-pre">
            <img class="flipx" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
          
            
              
                <li>
                  <a href="mailto:htt20081@126.com" target="_blank" class="social-github" title="email">
                    <img src="/images/icon/email.svg">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://music.163.com/#/user/home?id=28578795" target="_blank" class="social-github" title="wangyiyun">
                    <img src="/images/icon/wangyiyun.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://space.bilibili.com/741763" target="_blank" class="social-github" title="bilibili">
                    <img src="/images/icon/bilibili.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://steamcommunity.com/id/aisakaki/" target="_blank" class="social-github" title="steam">
                    <img src="/images/icon/steam.svg">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://bangumi.tv/user/aisakaki" target="_blank" class="social-github" title="bangumi">
                    <img src="/images/icon/bgm.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://my.playstation.com/profile/AISAKAKI" target="_blank" class="social-github" title="psn">
                    <img src="/images/icon/ps.png">
                  </a>
                </li>
              
            
          
          <li id="bg-next">
            <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
        </div>
      </div>
    </div>
  </figure>
  <div id="video-container" style="">
    <video style="object-fit: fill" id="bgvideo" class="video" video-name="" src="" width="auto" preload="auto">
    </video>
    <!-- <div id="video-btn" class="loadvideo videolive">
    </div> -->
    <div id="video-add">
    </div>
    <div class="video-stu">
    </div>
  </div>
  <div class="headertop-down faa-float animated" onclick="headertop_down()">
    <span>
      <i class="fa fa-chevron-down" aria-hidden="true">
      </i>
    </span>
  </div>
</div>

    <div id="page" class="site wrapper">
      <header class="site-header no-select gizle sabit" role="banner">
  <div class="site-top">
    <div class="site-branding">
      <span class="site-title">
        <span class="logolink moe-mashiro">
          <a href="/">
            <span class="sakurasono"></span>
            <span class="shironeko">宵晓咲</span>
          </a>
        </span>
      </span>
    </div>
    <div class="searchbox search-form-submit">
      <i class="iconfont js-toggle-search iconsearch icon-search">
      </i>
    </div>
    <div id="show-nav" class="showNav mobile-fit">
      <div class="line line1">
      </div>
      <div class="line line2">
      </div>
      <div class="line line3">
      </div>
    </div>
    <div class="lower-cantiner">
      <div class="lower">
        <nav class="mobile-fit-control hide">
          <ul id="menu-new" class="menu">
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  " aria-hidden="true"></i>
                    首页
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/archives">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
                    时间线
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="javascript:;">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
                    ACG
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/categories/Anime/">
                          <i class="fa " aria-hidden="true"></i>
                          动画
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/Game/">
                          <i class="fa " aria-hidden="true"></i>
                          游戏
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/Music/">
                          <i class="fa " aria-hidden="true"></i>
                          音乐
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/游戏设计/">
                          <i class="fa " aria-hidden="true"></i>
                          游戏设计
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="javascript:;">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-book faa-shake" aria-hidden="true"></i>
                    随想
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/categories/日记/">
                          <i class="fa " aria-hidden="true"></i>
                          日记
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/阅读/">
                          <i class="fa " aria-hidden="true"></i>
                          阅读
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/随笔/">
                          <i class="fa " aria-hidden="true"></i>
                          随笔
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="javascript:;">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-code faa-shake" aria-hidden="true"></i>
                    技术
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/categories/程序语言/">
                          <i class="fa " aria-hidden="true"></i>
                          程序
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/人工智能/">
                          <i class="fa " aria-hidden="true"></i>
                          人工智能
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/开发/">
                          <i class="fa " aria-hidden="true"></i>
                          开发
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/数据库与中间件/">
                          <i class="fa " aria-hidden="true"></i>
                          中间件
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/网络与云/">
                          <i class="fa " aria-hidden="true"></i>
                          网络
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/算法与数据结构/">
                          <i class="fa " aria-hidden="true"></i>
                          算法
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/计算机理论/">
                          <i class="fa " aria-hidden="true"></i>
                          CS
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/论文阅读笔记/">
                          <i class="fa " aria-hidden="true"></i>
                          论文
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="javascript:;">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-leaf faa-wrench" aria-hidden="true"></i>
                    其它
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/categories/硬件/">
                          <i class="fa " aria-hidden="true"></i>
                          硬件
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/博客/">
                          <i class="fa " aria-hidden="true"></i>
                          博客
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/工具/">
                          <i class="fa " aria-hidden="true"></i>
                          工具
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="javascript:;">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-list-ul faa-vertical" aria-hidden="true"></i>
                    清单
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/tags/悦读/">
                          <i class="fa fa-th-list faa-bounce" aria-hidden="true"></i>
                          书单
                        </a>
                      </li>
                    
                      <li>
                        <a href="/bangumi/">
                          <i class="fa fa-film faa-vertical" aria-hidden="true"></i>
                          番组
                        </a>
                      </li>
                    
                      <li>
                        <a href="/musicLibrary/">
                          <i class="fa fa-headphones" aria-hidden="true"></i>
                          歌单
                        </a>
                      </li>
                    
                      <li>
                        <a href="/tags/图集/">
                          <i class="fa fa-photo" aria-hidden="true"></i>
                          图集
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="/comment/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-pencil-square-o faa-tada" aria-hidden="true"></i>
                    留言板
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/links/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-link faa-shake" aria-hidden="true"></i>
                    Link
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/about/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-meetup faa-shake" aria-hidden="true"></i>
                    我
                  </span>
                </a>
                
              </li>
            
          </ul>
        </nav>
      </div>
    </div>
  </div>
</header>

      <link rel="stylesheet" type="text/css" href="/css/sharejs.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">
<div class="pattern-center-blank"></div>

  <div class="pattern-center single-center">
    <!-- 有配图默认渲染第一张 -->
    <div class="pattern-attachment-img lazyload" style="background-image: url(/images/post_cover/docker.png);" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg" data-src="/images/post_cover/docker.png">
    </div>
    <header class="pattern-header single-header">
      <h1 class="entry-title">
      docker</h1>
      <p class="entry-census">
        <span>
          <a href="/about/">

         <img src="/images/img/112.jpg">
          ·</a>
        </span>
        <span>
          <a href="/about/">aisaka</a>
         &nbsp  ·</span>
        <span class="bull">
        </span>   <!--删去一个点 · -->
        2020-7-1<span class="bull">
        </span>
      <!-- <span id="busuanzi_value_page_pv"></span>次阅读</p> -->
    </header>
  </div>

<div id="content" class="site-content">
  <div id="primary" class="content-area">
    <main id="main" class="site-main" role="main">
      <article id="post-1" class="post-1 post type-post status-publish format-standard has-post-thumbnail hentry category-uncategorized">
        <div class="toc"></div>
        <!--<div class="toc-entry-content"><!-- 套嵌目录使用（主要为了支援评论）-->
        
        <div class="entry-content">
          <center>云技术中常用到docker，那就归类到这里8</center>

<a id="more"></a>
<h1 id="docker的使用"><a href="#docker的使用" class="headerlink" title="docker的使用"></a>docker的使用</h1><p>docker三大概念：<strong>镜像（Image）</strong>、<strong>容器（Container）</strong>和<strong>仓库（Repository）</strong></p>
<p><strong>Registry</strong>是注册机构，可以管理<strong>多个仓库</strong>，参考：<a href="https://blog.csdn.net/haiyangyiba/article/details/88805764" target="_blank" rel="noopener">docker镜像的commit与push</a></p>
<p><strong>dockerfile是制作镜像的脚本</strong>，其描述了镜像如何制作和镜像的参数（重要），详细见：<a href="https://www.cnblogs.com/wuzhenzhao/p/11798039.html" target="_blank" rel="noopener">DockerFile与镜像(Image)仓库</a></p>
<p>镜像是冷的文件，镜像可以从仓库里拉取，也可以推送到仓库；可以由dockerfile创建，也可以由容器创建</p>
<p><strong>启动镜像就会为其创建一个容器，容器有运行、暂停、停止三个状态</strong></p>
<p>docker端口和宿主端口要对应，可以指定多个端口映射；目录也可以指定与宿主的映射</p>
<p><strong>docker命令大全：</strong></p>
<p><img src="//aisaka.cloud/网络与云/docker/docker.jpg" alt="docker"></p>
<p>详细说明：</p>
<p>P.S. docker镜像的命名一般是<code>&lt;name:tag&gt;</code>，不写tag则默认tag是<code>latest</code></p>
<pre class=" language-lang-bash"><code class="language-lang-bash"># ====从远程仓库拉取镜像到本地====
docker pull <name>
# 如何设置默认仓库见https://www.cnblogs.com/silva/p/11505925.html
# 可以创建自己的仓库服务，以阿里云为例，见 阿里云-容器镜像服务 说明
# 可以指定从哪个registry的哪个仓库拉取，比如registry是myregistry.local:1234，仓库是aisaka-test，想要拉取test-image：
docker pull myregistry.local:1234/aisaka-test/test-image

# 在仓库搜索镜像
docker search 
# ====推送容器镜像到远程镜像仓库====
docker push <name>
# 同pull一样也可以push到指定仓库
docker push myregistry.local:1234/aisaka-test/test-image

# ====查看本地镜像====
docker images
# 删除本地镜像
docker rmi <name>

# ====从容器生成镜像====
docker commit -a "aisaka" -m "test" nextcloud nextcloud:v1
# -a :提交的镜像作者；
# -c :使用Dockerfile指令来创建镜像；
# -m :提交时的说明文字；
# -p :在commit时，将容器暂停。
# nextcloud:v1是我给生成镜像取的名字，:后面跟着的是TAG，用于标识版本

# ====用dockerfile生成镜像====
docker build
# 见https://www.runoob.com/docker/docker-build-command.html

# ====镜像创建容器====
docker create <name>
# 与run的区别在于，create创建的容器是stop状态，而run是running状态

# ====【运行容器镜像】====
docker run -d -p 3306:3306 -v /mnt/sde/mysql:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=WZS134125 --name mysql mysql
# -d 后台守护进程方式运行（启动后进入后台）
# -p 端口映射，宿主端口：容器端口【重要】 
# -v 目录挂载，宿主目录：容器目录【重要】  
# -e 设置变量
# --name 设置容器名称【别忘了】
# 最后一个 即为要运行的镜像名
# 【多端口，多目录映射】-p和-v参数都可以有多个，即可以指定多个端口和目录映射

# ====容器的暂停、终止====
# 容器终止
docker stop <name>
# 启动已终止运行的容器
docker start <name>
# 清理掉所有处于终止状态的容器
docker container prune
# 暂停容器
docker pause <name>
# 继续已暂停的容器
docker unpause <name>
# 重启容器
docker restart <name>

# ====删除容器====
docker rm -f <name>
# 删除容器不是删除镜像
# -f可以删除未终止的容器；安全的操作是先终止再删除，-f可以省事
docker rm -v
# -v 会同时删除该容器挂载的volume（且没有其它容器连接到该Volume，否则不会删除）

# ====进入容器====
docker exec -it mysql /bin/bash 
#-it 分配一个虚拟终端，进入该容器命令行界面
# /bin/bash 放在镜像名后的是命令，这里我们希望使用/bin/bash。

# ====容器与宿主复制====
docker cp <宿主文件地址> <name>:<容器文件地址>

# ====查看容器状态====   
docker ps 

# ====镜像打包相关====
# 将镜像打包成tar（打包就是压缩，格式为tar）
docker save -o myImages.tar myImages
#-o 指定打包后的名字

# 导入tar打包的镜像（导入到本地镜像仓库）
docker load < myImages.tar

# 生成容器快照：容器直接打包成tar镜像（相当于commit+save）
docker export <name> > myDockerImage.tar
# 导入容器快照：将打包的tar镜像直接生成容器（相当于load+run）
docker import
# 使用见：https://www.simapple.com/327.html

# 给镜像打tag
docker tag
</code></pre>
<ol>
<li><p>pull、push、run，commit，images，ps，rmi，rm，cp，build等都是很常用的命令</p>
</li>
<li><p>dockerfile是个文本文件，记录了一个镜像的制作过程。执行docker build即可制作镜像，详见<a href="https://www.runoob.com/docker/docker-build-command.html" target="_blank" rel="noopener">dockerfile</a></p>
<p>而docker commit是将容器直接制作成镜像</p>
<p><strong>dockerfile主要目的是将镜像制作细节展示出来</strong>，比commit直接给你个黑盒更易用，更容易看懂这个镜像到底是干嘛的</p>
</li>
<li><p>docker-compose用于容器的编排</p>
<p>多个docker之间要相互合作，比如nginx、mysql、nextcloud每个组件都在一个容器里，那我就需要docker-compose。将项目需要哪些镜像，每个镜像怎么配置，要挂载哪些volume等等信息都写在docker-compose.yml里来实现容器的协同工作</p>
<p><strong>dockerfile记录了单个镜像的构建过程，而docker-compose.yml记录了一个项目（多个镜像）的构建过程</strong></p>
</li>
<li><p>容器快照import和打包load的区别</p>
<p>容器快照将会丢弃所有的历史记录和元数据信息，而镜像存储文件将保存完整记录，体积也会更大。</p>
</li>
<li><p><strong>是将宿主端口映射到容器端口，将宿主目录/volume挂载到容器目录</strong>（容器目录是挂载点，宿主目录/容器是被挂载卷），所以run的-v和-p参数都是宿主在前，容器在后</p>
</li>
</ol>
<h1 id="docker数据持久化"><a href="#docker数据持久化" class="headerlink" title="docker数据持久化"></a>docker数据持久化</h1><h2 id="bind-mount"><a href="#bind-mount" class="headerlink" title="bind mount"></a>bind mount</h2><p>在使用run语句进行目录挂载的时候，docker run的时候指定-v 参数</p>
<p><strong>bind mount方式</strong>：<code>-v 目录挂载，宿主目录：容器目录</code></p>
<p>bind mount方式简单明了，就是直接将宿主目录挂载到指定容器目录上</p>
<p>但问题在于这样就在不同的宿主机系统时不可移植，且必须指定全路径，不能在dockerfile里写</p>
<h2 id="volume"><a href="#volume" class="headerlink" title="volume"></a>volume</h2><p><strong>volume方式（建议）</strong>：<code>-v 目录挂载，volume名：容器目录</code></p>
<p><strong>先在宿主新建一个volume，然后再将volume挂载到指定容器内的挂载点上。</strong>容器目录是不会变的，迁移的时候新建volume直接指定名字即可，所以也不需要改变。</p>
<p>volume是被docker管理的，<strong>docker下所有的volume都在host机器上的指定目录下<code>/var/lib/docker/volumes</code></strong></p>
<p>最常用的就是volume方式</p>
<pre class=" language-lang-bash"><code class="language-lang-bash"># 新建一个volume
docker volume create my-volume

# 挂载
docker run  -v my-volume:/var/lib/mysql mysql
# （省略掉了其它参数）
</code></pre>
<p>如果<strong>不指定volume的话，也会挂载到该目录，不过名字是随机生成的一串id</strong></p>
<pre class=" language-lang-bash"><code class="language-lang-bash">docker run  -v /var/lib/mysql mysql
# 未指定volume，自动生成了
</code></pre>
<p>使用dockerfile的话，直接写VOLUME项的挂载点即可</p>
<pre class=" language-lang-dockerfile"><code class="language-lang-dockerfile">VOLUME /var/lib/mysql
</code></pre>
<p>但是，通过 dockerfile的VOLUME 指令创建的挂载点，是自动生成的<strong>默认容器名字</strong>（和前面一样）！</p>
<p>docker的volume也有一套管理工具</p>
<pre class=" language-lang-bash"><code class="language-lang-bash">docker volume create <volume name>
docker volume inspect <volume name> #查看指定容器详细信息
docker volume ls
docker volume rm
docker volume prune #删掉本地所有未使用的容器

# 删除容器的时候同时删除挂载的volume（前提是没有其它容器连接到该Volume，否则不会删除）
docker rm -v
</code></pre>
<p>关于volume的迁移：<a href="https://www.dazhuanlan.com/2019/12/17/5df802a921096/" target="_blank" rel="noopener">Docker数据卷Volume的备份，迁移，恢复</a></p>
<p><strong>docker-compose也可以设置volume，且可以指定volume挂载目录！结合后面一节docker-compose看</strong></p>
<p><strong>建议首选在docker-compose中配置volume（最方便、明了）</strong>（等其它参数），而不是在dockerfile中</p>
<pre class=" language-lang-yaml"><code class="language-lang-yaml">version: '2' # 表示该 Docker-Compose 文件使用的是 Version 2 file
services:
  docker-demo:  # 指定服务名称
    build: .  # 指定 Dockerfile 所在路径
    ports:    # 指定端口映射
      - "9000:8761"
    volumes:
      - <宿主目录volumes地址>:<容器挂载目录>   #使用具体路径直接挂载到本地
      - <volumes名>:<容器挂载目录>   #直接使用volumes名，但不能设置volumes目录，自动挂载在/var/lib/docker/volumes目录
</code></pre>
<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><p>容器中未被宿主目录挂载的目录和里面的数据，将被储存在容器里，随容器删除而删除</p>
<p><strong>所以要想将数据和容器隔离，必须用前面的方式做数据持久化，只有被挂载的数据会被持久化</strong></p>
<p>P.S.1 容器目录不可以为相对路径</p>
<p>P.S.2 显然，<strong>两种方法都可以做到容器之间共享数据（宿主目录or volume可挂载到多个容器的挂载点上）</strong></p>
<h1 id="dockerfile"><a href="#dockerfile" class="headerlink" title="dockerfile"></a>dockerfile</h1><p>参考：<a href="https://zhuanlan.zhihu.com/p/79142391" target="_blank" rel="noopener">Dockerfile 详解，看这一篇就够了</a></p>
<p>常用命令：<strong>FROM</strong>（基础镜像）、<strong>MAINTAINER</strong>（作者信息）、<strong>RUN</strong>（执行命令）、<strong>EXPOSE</strong>（容器内打开的端口，运行镜像的时候还需要指定这些端口到宿主的映射）、<strong>CMD</strong>（默认命令）、<strong>ENTRYPOINT</strong>、<strong>ADD</strong>、<strong>COPY</strong>（将文件或目录从宿主复制到Dockerfile构建的镜像中）、<strong>VOLUME</strong>（向容器添加卷，可以提供共享存储等功能）、<strong>WORKDIR</strong>（容器内部设置工作目录）、<strong>ENV</strong>（设置环境变量，运行容器的时候可以指定env参数）、<strong>USER</strong>（什么用户运行镜像）、<strong>ONBUILD</strong>（镜像创建触发器，当一个镜像被用作其他镜像的基础镜像时，这个触发器会被执行）</p>
<p>通过ADD、COPY、RUN就可以将自己写的代码如jar包war包放进去跑，或者数据库表文件什么的放进去，总之有这些参数就可以生成自己想要的镜像了</p>
<p><strong>Dockerfile的构建过程：</strong></p>
<ol>
<li>docker会从Dockerfile文件头FROM指定的基础镜像运行一个容器</li>
<li>然后执行一条指令，对容器修改</li>
<li>接着执行类似docker commit的操作，创建新的镜像层</li>
<li>在基于刚创建的镜像运行一个新的容器</li>
<li>执行Dockerfile下一条指令，直到所有指令执行完毕</li>
</ol>
<blockquote>
<p>docker会删除中间层创建的容器，但不会删除中间层镜像，所以可以使用docker run运行一个中间层容器，从而查看每一步构建后的镜像状态，这样就可以进行调试。</p>
</blockquote>
<p>P.S. <a href="https://www.cnblogs.com/fclbky/p/11338738.html" target="_blank" rel="noopener">docker CMD 和 ENTRYPOINT 区别</a></p>
<h1 id="docker原理"><a href="#docker原理" class="headerlink" title="docker原理"></a>docker原理</h1><p>docker是一种容器技术。</p>
<h2 id="容器运行在OS内核之上"><a href="#容器运行在OS内核之上" class="headerlink" title="容器运行在OS内核之上"></a>容器运行在OS内核之上</h2><blockquote>
<p>Docker使用Google公司推出的Go语言进行开发实现，基于Linux内核的cgroup，namespace，以及AUFS类的UnionFS等技术，<strong>对进程进行封装隔离</strong>，属于操作系统层面的虚拟化技术。 </p>
</blockquote>
<p>操作系统（OS）是管理计算机硬件、软件资源，并为计算机程序提供通用服务的系统软件。而<strong>管理硬件、软件资源，都是由内核实现的。docker镜像是不含内核的，容器与宿主机共享内核。</strong>docker镜像只包含一部分提供通用服务的用户态（userland），如各种lib、系统应用，还有一部分服务由内核提供。</p>
<p><strong>操作系统分为内核和用户空间</strong>。对于Linux而言，内核启动后，会挂载root文件系统为其提供用户空间支持。而Docker镜像（Image），就相当于是一个root文件系统。现在引入容器之后：<strong>我们开机的时候，linux内核会先启动，然后挂载root文件系统作为用户空间；而Docker镜像就相当于是一个root文件系统，每开一个就有了一个独立的用户空间。</strong></p>
<p><u>容器是运行在操作系统<strong>内核</strong>之上的</u>，容器<strong>对进程进行了封装隔离</strong>，属于不同容器之间是<strong>进程级隔离</strong>，<strong>不同容器之间OS内核是共用的</strong>。</p>
<h2 id="VM和容器"><a href="#VM和容器" class="headerlink" title="VM和容器"></a>VM和容器</h2><p>而VM是OS级别的隔离，<strong>不同的VM有自己的OS内核</strong>，只有硬件共用，软件完全隔离开。</p>
<p><strong>不同的docker进程不能映射到同一个端口，而VM可以</strong>（端口指的是我们访问<strong>主机（OS内核）上的某一进程</strong>的标识号，而docker是进程级隔离，并没有达到OS级隔离，所以不同容器不能映射同一端口；而VM是OS级隔离的，所以可以映射到同一端口）因为docker的隔离程度没有VM高</p>
<p>容器相比VM非常轻量，快。</p>
<h2 id="容器和镜像"><a href="#容器和镜像" class="headerlink" title="容器和镜像"></a>容器和镜像</h2><p><strong>镜像是静态的，容器是动态的。</strong></p>
<p><strong>docker镜像是分层存储的</strong>，最开始要指定一个基础镜像，<strong>我们每做一次修改就会在原本的镜像存储层上多搭一层，记录这个更改；而新搭的这层是静态、且可以持久化存储的</strong>。docker镜像的每一层都可以被不同镜像共同使用，如果某几层镜像本地已经有了，再去pull的时候就不会再拉已经有的镜像层了</p>
<p><strong>容器也是相同的存储架构，但是每次修改新搭的一层是动态的，而且并不是持久化存储的</strong>；当容器被删除，或者重启计算机（内存断电）之后，容器没了，相应的这些容器存储层也没了。<strong>所以我们在容器上进行了修改，想要保存下来这个修改的话必须<code>commit</code>成静态的镜像。（或者用volume，链接到宿主）</strong></p>
<h1 id="docker-compose"><a href="#docker-compose" class="headerlink" title="docker-compose"></a>docker-compose</h1><p>多个docker之间要相互合作，比如nginx、mysql、nextcloud每个组件都在一个容器里，那我就需要docker-compose。将项目需要哪些镜像，每个镜像怎么配置，要挂载哪些volume等等信息都写在docker-compose.yml里来实现容器的协同工作</p>
<p><strong>阅读参考（这个写得很详细了，具体配置和指令见此文）</strong>：<a href="https://www.jianshu.com/p/658911a8cff3" target="_blank" rel="noopener">Docker：Docker Compose 详解</a></p>
<p>在docker-compose中会指定多个dockerfile，且会指定该dockerfile生成的镜像的端口<code>容器端口：宿主端口</code>的映射（注意勿忘了必须在dockerfile里配置要暴露的端口）</p>
<pre class=" language-lang-bash"><code class="language-lang-bash"># 在 docker-compose.yml 所在路径下执行该命令 Compose 就会自动构建镜像并使用镜像启动容器
docker-compose up -d 

docker-compose ps
docker-compose logs
docker-compose build
docker-compose start 
docker-compose stop 
docker-compose rm
docker-compose up
docker-compose kill
docker-compose run 
docker-compose scale
</code></pre>
<p>模板（参数可选）：</p>
<pre class=" language-lang-yaml"><code class="language-lang-yaml">version: '2' # 表示该 Docker-Compose 文件使用的是 Version 2 file
services:
  server-docker-name1:  # 指定服务名称
    build: .  # 指定 Dockerfile 所在路径，如果没写下面三个子项就可以只写这里
      context: ./dir  
      dockerfile: Dockerfile  #对象
      args:
    image:  #指定镜像
    ports:    # 指定端口映射 <宿主>:<容器>
    volumes:  #设置volumes
    dns:
    dns_search:
    environment: #环境变量
    env_file:  #环境变量文件
    expose: #暴露端口，只将端口暴露给连接的服务，而不暴露给主机
    network_mode: #设置网络模式
    links: #将指定容器连接到当前连接，可以设置别名，避免ip方式导致的容器重启动态改变的无法连接情况
    volumes:  #卷挂载目录
    logs: #日志输出信息
  server-docker-name2:  
    # xxxxxx 和前面一样
</code></pre>
<h1 id="SOA和微服务"><a href="#SOA和微服务" class="headerlink" title="SOA和微服务"></a>SOA和微服务</h1><h2 id="SOA"><a href="#SOA" class="headerlink" title="SOA"></a>SOA</h2><p>SOA=<strong>Service Oriented Architecture</strong>，面向服务的架构</p>
<blockquote>
<p>SOA是一种设计方法，其包含多个服务，而<strong>服务之间通过相互依赖配合最终会提供一系列功能</strong>。一个服务通常以独立的形式存在于操作系统进程中。服务之间通过网络调用，而非采用进程内调用的方式进行通信。</p>
</blockquote>
<p>显然SOA通过REST RPC等手段进行的“调用”，比依赖注入还更解耦，进一步降低了服务耦合</p>
<p>如何通俗易懂地解释什么是SOA？ - 光太狼的回答 - 知乎 <a href="https://www.zhihu.com/question/42061683/answer/251131634" target="_blank" rel="noopener">https://www.zhihu.com/question/42061683/answer/251131634</a></p>
<blockquote>
<p><strong>ESB（企业服务总线）</strong>是SOA里的概念，简单来说 ESB 就是一根管道，用来连接各个服务节点。为了集成不同系统，不同协议的服务，ESB 做了消息的转化解释和路由工作，让不同的服务互联互通</p>
</blockquote>
<h2 id="微服务"><a href="#微服务" class="headerlink" title="微服务"></a>微服务</h2><p>随后SOA演变出一种微服务架构。微服务要求“业务需要<strong>彻底的</strong>组件化和服务化”，原有的<strong>单个业务系统会拆分为多个可以独立开发、设计、运行的小应用</strong>。这些小应用之间通过服务完成交互和集成。</p>
<p>容器技术大大帮助了微服务，因为容器就是可以独立开发、设计、运行，不依赖其它东西的小单元</p>
<p>而在微服务中替代SOA中ESB的就是<strong>API网关了，向外暴露出API接口</strong></p>
<p><strong>微服务是SOA的子集，一种实现方式</strong></p>
<blockquote>
<p>Java EE部署架构，通过展现层打包WARs，业务层划分到JARs最后<strong>部署为EAR一个大包</strong>，</p>
<p>而微服务则打开了这个黑盒子，把<strong>应用拆分成为一个一个的单个服务，应用Docker技术，不依赖任何服务器和数据模型，是一个全栈应用</strong>，可以通过自动化方式独立部署，每个服务运行在自己的进程中，通过轻量的通讯机制联系，经常是基于HTTP资源API，这些服务基于业务能力构建，能实现集中化管理<br>参考：<a href="https://zhuanlan.zhihu.com/p/88095798" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/88095798</a></p>
</blockquote>
<h1 id="敏捷开发-amp-Scrum-amp-CICD-amp-DevOps"><a href="#敏捷开发-amp-Scrum-amp-CICD-amp-DevOps" class="headerlink" title="敏捷开发&amp;Scrum&amp;CICD&amp;DevOps"></a>敏捷开发&amp;Scrum&amp;CICD&amp;DevOps</h1><h2 id="敏捷开发-amp-Scrum"><a href="#敏捷开发-amp-Scrum" class="headerlink" title="敏捷开发&amp;Scrum"></a>敏捷开发&amp;Scrum</h2><p><strong>Scrum是一种敏捷的开发过程框架</strong>：敏捷，即强调加快交付速度，变革的持续性。</p>
<p>持续——随时可运行。</p>
<h2 id="CI-amp-CD"><a href="#CI-amp-CD" class="headerlink" title="CI&amp;CD"></a>CI&amp;CD</h2><p><strong>CI（持续集成，Continuous Integration）</strong>：在<strong>源代码变更后自动检测、拉取、构建和（在大多数情况下）<u>进行单元测试</u></strong>的过程。<strong>四大特点：频繁发布，自动化流程，可重复，快速迭代。</strong></p>
<blockquote>
<p>自动化流程：关键是用自动化流程来处理软件生产中的方方面面。这包括构建、测试、分析、版本控制，以及在某些情况下的部署。</p>
<p>频繁发布：如果我们把某个历史版本的代码作为输入，我们应该得到对应相同的可交付产出。</p>
<p>单元测试：由开发人员编写的小型的专项测试，以确保新代码独立工作。“独立”这里意味着不依赖或调用其它不可直接访问的代码，也不依赖外部数据源或其它模块。</p>
<p>由于这与持续集成工作流有关，因此开发人员在本地工作环境中编写或更新代码，并通单元测试来确保新开发的功能或方法正确。通常，这些测试采用断言形式，即函数或方法的给定输入集产生给定的输出集。它们通常进行测试以确保正确标记和处理出错条件。有很多单元测试框架都很有用，例如用于 Java 开发的 <a href="https://link.zhihu.com/?target=https%3A//junit.org/junit5/" target="_blank" rel="noopener">JUnit</a>。</p>
</blockquote>
<p><strong>CD（持续交付，Continuous Delivery）</strong>：通常是指整个流程链（管道），它自动监测源代码变更并<strong>通过构建、测试、打包和相关操作运行它们以<u>生成可部署的版本</u></strong>，基本上没有任何人为干预。</p>
<blockquote>
<p>持续交付管道：将源代码转换为可发布产品的多个不同的 <em>任务(task)</em>和 <em>作业(job)</em>通常串联成一个软件“管道”，一个自动流程成功完成后会启动管道中的下一个流程。</p>
<p>监测程序通常是像 Jenkins、CodePipeline（阿里云）这样的应用程序，它还协调管道中运行的所有（或大多数）进程，监视变更是其功能之一。监测程序可以以几种不同方式监测变更。这些包括轮询（监测程序反复询问代码管理系统）、定期、推送</p>
</blockquote>
<p>详细参考：<a href="https://zhuanlan.zhihu.com/p/42286143" target="_blank" rel="noopener">什么是持续集成（CI）/持续部署（CD）？</a></p>
<p><strong>想象一个多条流水线的工厂来理解，所有流水线连接在一个机器人上，不同流水线对应机器人身上不同的组件，各个组件持续集成，持续交付。</strong></p>
<h2 id="DevOps"><a href="#DevOps" class="headerlink" title="DevOps"></a>DevOps</h2><p><strong>运维开发(DevOps)</strong> 是关于如何使开发和运维团队更容易合作开发和发布软件的一系列想法和推荐的实践。</p>
<p>持续交付管道是几个 DevOps 理念的实现。</p>
<h2 id="三者关系"><a href="#三者关系" class="headerlink" title="三者关系"></a>三者关系</h2><p><strong>敏捷专注于在加速交付的同时突出变化的过程。</strong></p>
<p><strong>CI/CD 专注于软件生命周期内强调自动化的工具。</strong></p>
<p><strong>DevOps 专注于强调响应能力的文化角色。</strong></p>
<p><img src="//aisaka.cloud/网络与云/docker/开发.jpg" alt="开发"></p>
<p><img src="//aisaka.cloud/网络与云/docker/开发2.jpg" alt="开发"></p>
<p>参考：<a href="https://zhuanlan.zhihu.com/p/106477550" target="_blank" rel="noopener">敏捷，持续集成/持续交付, DevOps 三者的区别</a></p>
<p>图来源：<a href="https://zhuanlan.zhihu.com/p/91371659" target="_blank" rel="noopener">DevOps到底是什么意思？</a></p>
<p>可以看得出，容器技术使得开发环境各个组件和部署环境都可以更好地隔离了，减小了相互之间的影响，大大助力了敏捷开发、CICD、DevOps开发模式。</p>

        </div>
        <!-- .entry-content -->
        <div class="single-reward">
          <div class="reward-open">赏
            <div class="reward-main">
              <ul class="reward-row">
                <li class="alipay-code"><img src="/images/donate/AliPayQR.jpg"></li>
                <li class="wechat-code"><img src="/images/donate/WeChanQR.jpg"></li>
              </ul>
            </div>
          </div>
        </div>
        <div style="text-align:center; width: 100%" class="social-share share-mobile" data-disabled="diandian, tencent"></div>
        <footer class="post-footer">
          <div class="post-lincenses"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="nofollow"><i class="fa fa-creative-commons" aria-hidden="true"></i> 知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a></div>
          <div class="post-tags">
          </div>
          <div class="post-share">
            <div class="social-share sharehidden share-component"></div>
            <i class="iconfont show-share icon-forward"></i>
          </div>
        </footer><!-- .entry-footer -->
      </article>
      <!-- #post-## -->
      <div class="toc" style="background: none;"></div>
      <section class="post-squares nextprev">
        
          
            <div class="post-nepre half previous">
          
            <a href="/网络与云/洛神云/" rel="prev">
              <div class="background">
                <img class="lazyload" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg" data-src="/images/post_cover/aliyun.jpg" style="width: 100%; height: 100%; object-fit: cover; pointer-events: none;" onerror="imgError(this,3)" src="/images/post_cover/aliyun.jpg">
              </div>
              <span class="label">
              Previous Post</span>
              <div class="info">
                <h3>
                洛神云</h3>
                <hr>
              </div>
            </a>
          </div>
        
        
          
            <div class="post-nepre half next">
          
            <a href="/网络与云/虚拟化/" rel="next">
              <div class="background">
                <img class="lazyload" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg" data-src="/images/post_cover/cloud.jpg" style="width: 100%; height: 100%; object-fit: cover; pointer-events: none;" onerror="imgError(this,3)" src="/images/post_cover/cloud.jpg">
              </div>
              <span class="label">
              Next Post</span>
              <div class="info">
                <h3>
                虚拟化与云计算</h3>
                <hr>
              </div>
            </a>
          </div>
        
      </section>
      
<div id="vcomments"></div>
<script>
  window.onload = function(){
      var valine = new Valine();
      valine.init({
        el: '#vcomments',
        appId: "d2ULHdiL7VOfJf17rpCD4DOX-gzGzoHsz",
        appKey: "OLf7QaP1oTtqKhulLHuajYKu",
        path: window.location.pathname,

   //      emojiCDN: '//i0.hdslb.com/bfs/emote/',
   //      emojiMaps: {
   //     "tv_doge": "6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png",
   //     "tv_亲亲": "a8111ad55953ef5e3be3327ef94eb4a39d535d06.png",
   //     "tv_偷笑": "bb690d4107620f1c15cff29509db529a73aee261.png",
   //     "tv_再见": "180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png",
   //     "tv_冷漠": "b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png",
   //     "tv_发怒": "34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png",
   //     "tv_发财": "34db290afd2963723c6eb3c4560667db7253a21a.png",
   //     "tv_可爱": "9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png",
   //     "tv_吐血": "09dd16a7aa59b77baa1155d47484409624470c77.png",
   //     "tv_呆": "fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png",
   //     "tv_呕吐": "9f996894a39e282ccf5e66856af49483f81870f3.png",
   //     "tv_困": "241ee304e44c0af029adceb294399391e4737ef2.png",
   //     "tv_坏笑": "1f0b87f731a671079842116e0991c91c2c88645a.png",
   //     "tv_大佬": "093c1e2c490161aca397afc45573c877cdead616.png",
   //     "tv_大哭": "23269aeb35f99daee28dda129676f6e9ea87934f.png",
   //     "tv_委屈": "d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png",
   //     "tv_害羞": "a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png",
   //     "tv_尴尬": "7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png",
   //     "tv_微笑": "70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png",
   //     "tv_思考": "90cf159733e558137ed20aa04d09964436f618a1.png",
   //     "tv_惊吓": "0d15c7e2ee58e935adc6a7193ee042388adc22af.png",
   //     // ... 更多表情
   // } ,

        placeholder: "你是我一生只会遇见一次的惊喜 ..."
      })
  }
</script>


      <section class="author-profile">
        <div class="info" itemprop="author" itemscope="" itemtype="https://schema.org/Person">
          <a href="/about/" class="profile gravatar">

            <img src="/images/img/112.jpg" itemprop="image" alt="aisaka" height="70" width="70">
          </a>
          <div class="meta">
            <span class="title">Author</span>
            <h3 itemprop="name">

            <a href="https://aisaka.cloud" itemprop="url" rel="author">aisaka</a>
            </h3>
          </div>
        </div>
        <hr>

        <p><i class="iconfont icon-write"></i>且听风吟</p>
      </section>
    </main><!-- #main -->
  </div><!-- #primary -->
</div>



    </div>    
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..."/>
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            // PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
    <!-- <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 aisaka<br>
      powered_by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer> -->
<footer id="colophon" class="site-footer" role="contentinfo">
  <div class="site-info">
    <div class="footertext">
      <div class="img-preload">
        <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/wordpress-rotating-ball-o.svg">
        <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/disqus-preloader.svg">
      </div>
      <p style="color: #666666;">&copy 2016~2021</p>
    </div>
    <div class="footer-device">
    <p style="font-family: 'Ubuntu', sans-serif;">
        <span style="color: #b9b9b9;">
          aisaka
        </span>
      </p>
    </div>
  </div><!-- .site-info -->
</footer>



<!-- <script src="/js/tocbot.js"></script> -->
<script type="text/javascript" src="/js/lib.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script type="text/javascript" src="/js/InsightSearch.js"></script>
<script type="text/javascript" src="/js/jquery.fancybox.min.js"></script>
<script type="text/javascript" src="/js/zoom.min.js"></script>
<script type="text/javascript" src="/js/sakura-app.js"></script>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<!-- <script src='//unpkg.com/valine@1.3.4/dist/Valine.min.js'></script> -->
<script src='//unpkg.com/valine@1.4.14/dist/Valine.min.js'></script>
<script src="/js/botui.js"></script>
<!-- 不蒜子 网页计数器 -->
<script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script> -->
<script type="text/javascript">
/* <![CDATA[ */
if (/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  var Poi = {"pjax":"1","movies":{"url": "","name":"","live":"close"},"windowheight":"fixed","codelamp":"close","ajaxurl":"","order":"asc","formpostion":"bottom"};
} else {
  var Poi = {"pjax":"1","movies":{"url": "","name":"","live":"open"},"windowheight":"auto","codelamp":"close","ajaxurl":"","order":"asc","formpostion":"bottom"};
}
/* ]]> */

</script>
<script>
$(document).ready(function() {
  if ($(".toc").length > 0 && document.body.clientWidth > 1200) {
    if ($(".pattern-center").length > 0) { //有图的情况
      tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', // 放置目录的容器
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', // 正文内容所在
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', // 需要索引的标题级别
          headingsOffset: -400,
          scrollSmoothOffset: -85
      });
    } else {
      tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', // 放置目录的容器
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', // 正文内容所在
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', // 需要索引的标题级别
          headingsOffset: -85,
          scrollSmoothOffset: -85
      });
    }
    var offsetTop = $('.toc').offset().top - 95;
    window.onscroll = function() {
      var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
      if (scrollTop >= offsetTop) {
        $('.toc').addClass('toc-fixed');
      } else {
        $('.toc').removeClass('toc-fixed');
      }
    }
  }
});
</script>

    <div class="openNav no-select" style="height: 50px;">
      <div class="iconflat no-select" style="width: 50px; height: 50px;">
        <div class="icon"></div>
      </div>
      <div class="site-branding search-form-submit">
        <i class="iconfont js-toggle-search iconsearch icon-search"></i>
      </div>
    </div>
  </section>
  <div id="mo-nav" class="">
  <div class="m-avatar">
    <img src="/images/img/112.jpg">
  </div>
  <p style="text-align: center; color: #333; font-weight: 900; font-family: 'Ubuntu', sans-serif; letter-spacing: 1.5px">宵晓咲</p>
  <p style="text-align: center; word-spacing: 20px;">
    
  </p>
  <ul id="menu-new-1" class="menu">
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  " aria-hidden="true"></i>
            首页
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/archives">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
            时间线
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="javascript:;">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
            ACG
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/categories/Anime/">
                  <i class="fa " aria-hidden="true"></i>
                  动画
                </a>
              </li>
            
              <li>
                <a href="/categories/Game/">
                  <i class="fa " aria-hidden="true"></i>
                  游戏
                </a>
              </li>
            
              <li>
                <a href="/categories/Music/">
                  <i class="fa " aria-hidden="true"></i>
                  音乐
                </a>
              </li>
            
              <li>
                <a href="/categories/游戏设计/">
                  <i class="fa " aria-hidden="true"></i>
                  游戏设计
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="javascript:;">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-book faa-shake" aria-hidden="true"></i>
            随想
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/categories/日记/">
                  <i class="fa " aria-hidden="true"></i>
                  日记
                </a>
              </li>
            
              <li>
                <a href="/categories/阅读/">
                  <i class="fa " aria-hidden="true"></i>
                  阅读
                </a>
              </li>
            
              <li>
                <a href="/categories/随笔/">
                  <i class="fa " aria-hidden="true"></i>
                  随笔
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="javascript:;">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-code faa-shake" aria-hidden="true"></i>
            技术
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/categories/程序语言/">
                  <i class="fa " aria-hidden="true"></i>
                  程序
                </a>
              </li>
            
              <li>
                <a href="/categories/人工智能/">
                  <i class="fa " aria-hidden="true"></i>
                  人工智能
                </a>
              </li>
            
              <li>
                <a href="/categories/开发/">
                  <i class="fa " aria-hidden="true"></i>
                  开发
                </a>
              </li>
            
              <li>
                <a href="/categories/数据库与中间件/">
                  <i class="fa " aria-hidden="true"></i>
                  中间件
                </a>
              </li>
            
              <li>
                <a href="/categories/网络与云/">
                  <i class="fa " aria-hidden="true"></i>
                  网络
                </a>
              </li>
            
              <li>
                <a href="/categories/算法与数据结构/">
                  <i class="fa " aria-hidden="true"></i>
                  算法
                </a>
              </li>
            
              <li>
                <a href="/categories/计算机理论/">
                  <i class="fa " aria-hidden="true"></i>
                  CS
                </a>
              </li>
            
              <li>
                <a href="/categories/论文阅读笔记/">
                  <i class="fa " aria-hidden="true"></i>
                  论文
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="javascript:;">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-leaf faa-wrench" aria-hidden="true"></i>
            其它
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/categories/硬件/">
                  <i class="fa " aria-hidden="true"></i>
                  硬件
                </a>
              </li>
            
              <li>
                <a href="/categories/博客/">
                  <i class="fa " aria-hidden="true"></i>
                  博客
                </a>
              </li>
            
              <li>
                <a href="/categories/工具/">
                  <i class="fa " aria-hidden="true"></i>
                  工具
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="javascript:;">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-list-ul faa-vertical" aria-hidden="true"></i>
            清单
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/tags/悦读/">
                  <i class="fa fa-th-list faa-bounce" aria-hidden="true"></i>
                  书单
                </a>
              </li>
            
              <li>
                <a href="/bangumi/">
                  <i class="fa fa-film faa-vertical" aria-hidden="true"></i>
                  番组
                </a>
              </li>
            
              <li>
                <a href="/musicLibrary/">
                  <i class="fa fa-headphones" aria-hidden="true"></i>
                  歌单
                </a>
              </li>
            
              <li>
                <a href="/tags/图集/">
                  <i class="fa fa-photo" aria-hidden="true"></i>
                  图集
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="/comment/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-pencil-square-o faa-tada" aria-hidden="true"></i>
            留言板
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/links/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-link faa-shake" aria-hidden="true"></i>
            Link
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/about/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-meetup faa-shake" aria-hidden="true"></i>
            我
          </span>
        </a>
        
      </li>
    
  </ul>
  <p style="text-align: center; font-size: 13px; color: #b9b9b9;">&copy 2019 hexo-sakura</p>
</div>
<button onclick="topFunction()" class="mobile-cd-top" id="moblieGoTop" title="Go to top" style="display: none;"><i class="fa fa-chevron-up" aria-hidden="true"></i></button>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>
<!-- require MetingJS -->
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>
<style>
  .aplayer .aplayer-lrc {
    height: 35px;
  }
  .aplayer .aplayer-lrc p{
    font-size: 16px;
    font-weight: 700;
    line-height: 18px !important;
  }
  .aplayer .aplayer-lrc p.aplayer-lrc-current{
    color: #FF1493;
  }
  .aplayer.aplayer-narrow .aplayer-body{
    left: -66px !important;
  }
  .aplayer.aplayer-fixed .aplayer-lrc {
    display: none;
  }
  .aplayer .aplayer-lrc.aplayer-lrc-hide {
      display:none !important;
  }
  .aplayer.aplayer-fixed .lrc-show {
    display: block;
    background: rgba(255, 255, 255, 0.8);
  }
</style>
<meting-js

    id=""

    server="netease"

    type="playlist"

    fixed="true"

    autoplay="false"

    loop="all"

    order="random"

    preload="auto"

    volume="0.7"

    mutex="true"

</meting-js>
<!--这里我want aplayer失效-->
<script>
  $(function(){
    $('body').on('click', '.aplayer', function(){
      if($('.aplayer-button').hasClass('aplayer-play')) {
        $('.aplayer-lrc').removeClass('lrc-show');
      } else {
        $('.aplayer-lrc').addClass('lrc-show');
      }
    })
  });
</script>

</body>
</html>